{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "cf0647d1_69681b42",
        "filename": "rtl8821cu/os_dep/osdep_service.c",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1293738
      },
      "writtenOn": "2021-02-05T22:20:05Z",
      "side": 1,
      "message": "what symbols did this driver need that weren\u0027t allowed for drivers? Can we remove their use?",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 76
      },
      "revId": "1b65fce0d030a710f56bd20b01cea7fbdbc9a39e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2a380fa7_57561944",
        "filename": "rtl8821cu/os_dep/osdep_service.c",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1791310
      },
      "writtenOn": "2021-02-10T12:27:10Z",
      "side": 1,
      "message": "I think it was kern_read/kern_write... or at least that\u0027s what i remember, but somehow now it seems things are working without it... so maybe i did something else wrong back then...",
      "parentUuid": "cf0647d1_69681b42",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 76
      },
      "revId": "1b65fce0d030a710f56bd20b01cea7fbdbc9a39e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94155538_05025a93",
        "filename": "rtl8821cu/os_dep/osdep_service.c",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1791310
      },
      "writtenOn": "2021-02-10T13:09:06Z",
      "side": 1,
      "message": "Actually, never mind. I do think we need these:\n\nWARNING: module 8821cu uses symbol kernel_write from namespace VFS_internal_I_am_really_a_filesystem_and_am_NOT_a_driver, but does not import it.\nWARNING: module 8821cu uses symbol kernel_read from namespace VFS_internal_I_am_really_a_filesystem_and_am_NOT_a_driver, but does not import it.\nWARNING: module 8821cu uses symbol kern_path from namespace VFS_internal_I_am_really_a_filesystem_and_am_NOT_a_driver, but does not import it.",
      "parentUuid": "2a380fa7_57561944",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 76
      },
      "revId": "1b65fce0d030a710f56bd20b01cea7fbdbc9a39e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7214bef2_94a26ac6",
        "filename": "rtl8821cu/os_dep/osdep_service.c",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1791310
      },
      "writtenOn": "2021-02-18T13:18:55Z",
      "side": 1,
      "message": "gentle ping here, can I move forward with this CL? kernel_read, kernel_write, kern_path EXPORT was removed in this CL: https://android-review.googlesource.com/c/kernel/common/+/1354333. I could submit this CL as is and wait for upstream here to catch up with that android kernel change and pull it in when it happens. wdyt?",
      "parentUuid": "94155538_05025a93",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 76
      },
      "revId": "1b65fce0d030a710f56bd20b01cea7fbdbc9a39e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af83f9ad_ada13a6d",
        "filename": "rtl8821cu/os_dep/osdep_service.c",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1293738
      },
      "writtenOn": "2021-02-18T16:50:14Z",
      "side": 1,
      "message": "These functions are always going to be there in upstream kernels, because they might be needed by some specific in-tree drivers or filesystems. But for GKI, we decided to ban their use because they are often abused (a driver writing to a filesystem, what??) and so we introduced this module namespace to detect abuse by drivers. In android11-5.4 we had to export with the namespace because we decided to keep incfs as a module, and it needs them, but in android12+ we will ban use of these symbols and there will be no workaround.\n\nSo, I\u0027m afraid we cannot just take these changes as is, and you need to modify the realtek driver to not use these symbols. It absolutely should not depend on being able to read or write files from the kernel driver.",
      "parentUuid": "7214bef2_94a26ac6",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 76
      },
      "revId": "1b65fce0d030a710f56bd20b01cea7fbdbc9a39e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecdbe7ab_a0e48aca",
        "filename": "rtl8821cu/os_dep/osdep_service.c",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1791310
      },
      "writtenOn": "2021-02-18T17:14:55Z",
      "side": 1,
      "message": "thanks for additional context, i will take another look at it tomorrow to replace these symbols.",
      "parentUuid": "af83f9ad_ada13a6d",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 76
      },
      "revId": "1b65fce0d030a710f56bd20b01cea7fbdbc9a39e",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}